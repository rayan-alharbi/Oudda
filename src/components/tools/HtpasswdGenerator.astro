---

---

<div class="tool-wrapper">
    <div class="form-group">
        <label>Username</label>
        <input type="text" id="username" placeholder="admin" />
    </div>

    <div class="form-group">
        <label>Password</label>
        <input type="text" id="password" placeholder="s3cr3t" />
    </div>

    <div class="form-group">
        <label>Algorithm</label>
        <select id="algo">
            <option value="plaintext">Plaintext (Windows)</option>
            <option value="sha1">SHA-1 (Netscape/Nginx)</option>
            <option value="crypt">Crypt (Unix)</option>
        </select>
    </div>

    <button id="gen-btn" class="btn-primary">Generate Entry</button>

    <textarea id="output" readonly placeholder="admin:{SHA}..." class="code-box"
    ></textarea>
</div>

<script>
    // Simple SHA-1 implementation for browser
    async function sha1(str) {
        const buffer = new TextEncoder().encode(str);
        const hash = await crypto.subtle.digest("SHA-1", buffer);
        const b64 = btoa(String.fromCharCode(...new Uint8Array(hash)));
        return "{SHA}" + b64;
    }

    // Basic Crypt (Unix) simulation not easily done in pure JS without lib.
    // We will simulate a simple variant or fallback to plaintext if complex.
    // Actually, let's stick to SHA1 as it's standard enough for Nginx/Apache Basic Auth.

    const userEl = document.getElementById("username") as HTMLInputElement;
    const passEl = document.getElementById("password") as HTMLInputElement;
    const algoEl = document.getElementById("algo") as HTMLSelectElement;
    const outEl = document.getElementById("output") as HTMLTextAreaElement;
    const btn = document.getElementById("gen-btn");

    btn.addEventListener("click", async () => {
        const user = userEl.value.trim();
        const pass = passEl.value;
        const algo = algoEl.value;

        if (!user || !pass) {
            outEl.value = "الرجاء إدخال اسم المستخدم وكلمة المرور";
            return;
        }

        let result = "";

        if (algo === "plaintext") {
            result = `${user}:${pass}`;
        } else if (algo === "sha1") {
            const hash = await sha1(pass);
            result = `${user}:${hash}`;
        } else if (algo === "crypt") {
            // Placeholder: "Crypt" usually requires standard DES library which is heavy.
            // We'll warn user or fallback.
            outEl.value =
                "Crypt is not supported in this lite version based on client-side limits. Using SHA-1...";
            const hash = await sha1(pass);
            result = `${user}:${hash}`;
        }

        outEl.value = result;
    });
</script>

<style>
    .tool-wrapper {
        max-width: 500px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }
    .form-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }
    input,
    select {
        padding: 0.8rem;
        border: 1px solid var(--c-border);
        border-radius: 6px;
        background: var(--c-surface);
        color: var(--c-text);
    }
    .btn-primary {
        padding: 0.8rem;
        background: var(--c-primary);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: bold;
    }
    .code-box {
        height: 100px;
        font-family: monospace;
        background: var(--c-surface-alt);
    }
</style>
