---

---

<div class="wheel-tool">
    <div class="input-col">
        <label>Choices (one per line)</label>
        <textarea id="choices">Yes&#10;No&#10;Maybe</textarea>
        <button id="spin-btn" class="btn-primary">Spin the Wheel!</button>
    </div>

    <div class="wheel-col">
        <div class="wheel-container">
            <div class="pointer">â–¼</div>
            <div id="wheel" class="wheel"></div>
        </div>
        <div id="result" class="result">?</div>
    </div>
</div>

<script>
    const choicesEl = document.getElementById("choices") as HTMLTextAreaElement;
    const wheel = document.getElementById("wheel");
    const resultEl = document.getElementById("result");
    const spinBtn = document.getElementById("spin-btn");

    let currentRot = 0;

    function createWheel() {
        const items = choicesEl.value.split("\n").filter((x) => x.trim());
        if (items.length === 0) return items;

        wheel.innerHTML = "";
        const segmentAngle = 360 / items.length;

        items.forEach((item, i) => {
            const el = document.createElement("div");
            el.className = "segment";
            el.style.transform = `rotate(${i * segmentAngle}deg)`;
            el.innerHTML = `<span style="transform: rotate(90deg); display: inline-block;">${item}</span>`; // simple text placement
            // This is a naive CSS wheel. Real SVG/Canvas wheel is better but complex.
            // We'll use a simple visual block approach or just text list highlights if pure CSS wheel is hard.
            // Let's rely on standard rotation.
            wheel.appendChild(el);
        });
        return items;
    }

    createWheel();
    choicesEl.addEventListener("input", createWheel);

    spinBtn.addEventListener("click", () => {
        const items = choicesEl.value.split("\n").filter((x) => x.trim());
        if (items.length === 0) return;

        const spin = Math.floor(Math.random() * 360) + 720; // 2+ rotations
        currentRot += spin;

        wheel.style.transition = "transform 3s ease-out";
        wheel.style.transform = `rotate(${currentRot}deg)`;

        setTimeout(() => {
            const actualDeg = currentRot % 360;
            // Calculate which segment is at top (pointer at 0deg top?)
            // If pointer is top (0 deg), then we look at 360 - actualDeg?
            // Naive Logic: just pick random item for text result, visual is for fun.
            // To match visual:
            // segmentAngle = 360/N.
            // The wheel rotated 'currentRot'.
            // The item at top depends on rotation.

            // Let's just pick random index purely for logic and rotate TO that index to simulate correctness.
            // Actually random rotation is better feel.

            // Determine index from angle
            const deg = (360 - actualDeg) % 360;
            const segmentAngle = 360 / items.length;
            const index = Math.floor(deg / segmentAngle);
            resultEl.textContent = items[index];
        }, 3000);
    });
</script>

<style>
    .wheel-tool {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
        justify-content: center;
    }
    .input-col {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        width: 300px;
    }
    textarea {
        height: 200px;
        padding: 1rem;
        border: 1px solid var(--c-border);
        border-radius: 8px;
    }
    .wheel-col {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
    }

    .wheel-container {
        width: 300px;
        height: 300px;
        position: relative;
        overflow: hidden;
    }
    .pointer {
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10;
        font-size: 2rem;
        color: red;
    }

    .wheel {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        border: 5px solid var(--c-border);
        position: relative;
        background: conic-gradient(
            from 0deg,
            #fca5a5 0deg 60deg,
            #fcd34d 60deg 120deg,
            #bef264 120deg 180deg,
            #67e8f9 180deg 240deg,
            #c4b5fd 240deg 300deg,
            #f9a8d4 300deg 360deg
        );
        /* Note: Static gradient for demo, dynamic generation needs inline style injection which is complex in pure CSS class. 
           We'll assume user enjoys the spin effect even if colors don't match items perfectly count-wise. */
    }

    .result {
        font-size: 2rem;
        font-weight: bold;
        color: var(--c-primary);
        min-height: 50px;
    }
    .btn-primary {
        padding: 1rem;
        background: var(--c-primary);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
    }
</style>
