---

---

<div class="zalgo-container">
    <div class="input-group">
        <textarea id="input" placeholder="النص العادي..."></textarea>
    </div>

    <div class="controls">
        <label>
            مستوى التشوه
            <input type="range" id="intensity" min="1" max="10" value="5" />
        </label>
        <div class="toggles">
            <label><input type="checkbox" id="opt-up" checked /> أعلى</label>
            <label><input type="checkbox" id="opt-mid" checked /> وسط</label>
            <label><input type="checkbox" id="opt-down" checked /> أسفل</label>
        </div>
    </div>

    <div class="output-group">
        <textarea id="output" readonly placeholder="H̵͖̗͍̙͋̿̍̅̀͘ė̴̳̊͋͛͊̃͝ĺ̸̖̔̾͌̇̑̊l̴̙̀̓̇̌͂̊͠õ̴̖̪̀̄̿̔͌̇"></textarea>
    </div>
</div>

<script>
    const chars = {
        up: [
            "̍",
            "̎",
            "̄",
            "̅",
            "̿",
            "̑",
            "̆",
            "̐",
            "͒",
            "͗",
            "͑",
            "̇",
            "̈",
            "̊",
            "͂",
            "̓",
            "̈",
            "͊",
            "͋",
            "͌",
            "̃",
            "̂",
            "̌",
            "͐",
            "̀",
            "́",
            "̋",
            "̏",
            "̒",
            "̓",
            "̔",
            "̽",
            "̉",
            "ͧ",
            "ͨ",
            "ͩ",
            "ͪ",
            "ͫ",
            "ͬ",
            "ͭ",
            "ͮ",
            "",
            "̯",
            "̰",
            "̱",
            "̲",
            "̳",
            "̹",
            "̺",
            "̻",
            "̼",
            "ͅ",
            "͇",
            "͈",
            "͉",
            "͍",
            "͎",
            "͓",
            "͚",
            "͙",
            "͚",
            "͛",
        ],
        mid: [
            "̕",
            "̛",
            "̀",
            "́",
            "͘",
            "̡",
            "̢",
            "̧",
            "̨",
            "̴",
            "̵",
            "̶",
            "͜",
            "͝",
            "͞",
            "͟",
            "͠",
            "͢",
            "̸",
            "̷",
            "͡",
            " ҉",
        ],
        down: [
            "̖",
            "̗",
            "̘",
            "̙",
            "̜",
            "̝",
            "",
            "hj",
            "̼",
            "̻",
            "̺",
            "̹",
            "̳",
            "̲",
            "̱",
            "̰",
            "̯",
            "̬",
            "a",
            "̩",
            "w",
            "aa",
            "a",
            "a",
            "a",
            "a",
        ], // simplified for brevity, real zalgo has more
    };
    // Proper Zalgo chars (shortened list for functionality)
    const zUp = [
        "̍",
        "̎",
        "̄",
        "̅",
        "̿",
        "̑",
        "̆",
        "̐",
        "͒",
        "͗",
        "͑",
        "̇",
        "̈",
        "̊",
        "͂",
        "̓",
        "̈",
        "͊",
        "͋",
        "͌",
        "̃",
        "̂",
        "̌",
        "͐",
        "̀",
        "́",
        "̋",
        "̏",
        "̒",
        "̓",
        "̔",
        "̽",
        "̉",
        "ͧ",
        "ͨ",
        "ͩ",
        "ͪ",
        "ͫ",
        "ͬ",
        "ͭ",
        "ͮ",
        "",
    ];
    const zMid = [
        "̕",
        "̛",
        "̀",
        "́",
        "͘",
        "̡",
        "̢",
        "̧",
        "̨",
        "̴",
        "̵",
        "̶",
        "͜",
        "͝",
        "͞",
        "͟",
        "͠",
        "͢",
        "̸",
        "̷",
        "͡",
        " ҉",
    ];
    const zDown = [
        "̖",
        "̗",
        "̘",
        "̙",
        "̜",
        "̝",
        "",
        "̻",
        "̺",
        "̹",
        "̳",
        "̲",
        "̱",
        "̰",
        "̯",
        "̬",
        "͎",
        "͓",
        "͚",
        "͙",
        "͛",
        "͜",
        "͝",
        "͞",
        "͟",
        "͠",
        "͢",
        "̸",
        "̷",
        "͡",
        " ҉",
    ];

    function zalgo(text, intensity, opts) {
        let result = "";
        for (let i = 0; i < text.length; i++) {
            result += text[i];
            const num = Math.floor(Math.random() * intensity);

            if (opts.up)
                for (let j = 0; j < num; j++)
                    result += zUp[Math.floor(Math.random() * zUp.length)];
            if (opts.mid)
                for (let j = 0; j < num / 2; j++)
                    result += zMid[Math.floor(Math.random() * zMid.length)];
            if (opts.down)
                for (let j = 0; j < num; j++)
                    result += zDown[Math.floor(Math.random() * zDown.length)];
        }
        return result;
    }

    const input = document.getElementById("input") as HTMLTextAreaElement;
    const output = document.getElementById("output") as HTMLTextAreaElement;
    const range = document.getElementById("intensity") as HTMLInputElement;
    const inputs = document.querySelectorAll("input, textarea");

    function update() {
        const i = parseInt(range.value);
        const opts = {
            up: (document.getElementById("opt-up") as HTMLInputElement).checked,
            mid: (document.getElementById("opt-mid") as HTMLInputElement)
                .checked,
            down: (document.getElementById("opt-down") as HTMLInputElement)
                .checked,
        };
        output.value = zalgo(input.value, i, opts);
    }

    inputs.forEach((el) => el.addEventListener("input", update));
</script>

<style>
    textarea {
        width: 100%;
        height: 150px;
        padding: 1rem;
        border: 1px solid var(--c-border);
        border-radius: 8px;
    }
    .controls {
        background: var(--c-surface-alt);
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
    }
    .toggles {
        display: flex;
        gap: 1rem;
        margin-top: 0.5rem;
    }
</style>
