---

---

<div class="tool-content">
    <div id="coin" class="coin">
        <div class="side heads">
            <span class="icon">ðŸª™</span>
            <span>HEADS</span>
        </div>
        <div class="side tails">
            <span class="icon">ðŸ¦…</span>
            <span>TAILS</span>
        </div>
    </div>

    <div class="controls">
        <button id="flip-btn" class="btn primary">FLIP COIN</button>
    </div>

    <div class="stats">
        Heads: <span id="heads-count">0</span> | Tails: <span id="tails-count"
            >0</span
        >
    </div>
</div>

<script>
    const coin = document.getElementById("coin");
    const btn = document.getElementById("flip-btn") as HTMLButtonElement;
    const headsCountInfo = document.getElementById("heads-count");
    const tailsCountInfo = document.getElementById("tails-count");

    let heads = 0;
    let tails = 0;

    btn?.addEventListener("click", () => {
        btn.disabled = true;
        // Reset animation
        if (coin) {
            coin.style.animation = "none";
            // Trigger reflow
            void coin.offsetWidth;

            const result = Math.random() < 0.5 ? "heads" : "tails";

            // Animation: spin 5 times (1800deg) + result
            // Heads = 0deg, Tails = 180deg

            const rotations = 1800 + (result === "heads" ? 0 : 180);

            coin.style.transition = "transform 3s ease-out";
            coin.style.transform = `rotateY(${rotations}deg)`;

            setTimeout(() => {
                if (result === "heads") heads++;
                else tails++;
                if (headsCountInfo)
                    headsCountInfo.textContent = heads.toString();
                if (tailsCountInfo)
                    tailsCountInfo.textContent = tails.toString();

                // Normalize rotation to keep numbers small
                coin.style.transition = "none";
                coin.style.transform = `rotateY(${result === "heads" ? 0 : 180}deg)`;

                btn.disabled = false;
            }, 3000);
        }
    });
</script>

<style>
    .tool-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--space-xl);
        perspective: 1000px;
    }

    .coin {
        width: 200px;
        height: 200px;
        position: relative;
        transform-style: preserve-3d;
        transition: transform 1s;
    }

    .side {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        border: 10px solid #f59e0b;
        background: #fbbf24;
        color: #78350f;
        font-weight: 900;
        font-size: 1.5rem;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    .side .icon {
        font-size: 4rem;
        margin-bottom: 0.5rem;
    }

    .tails {
        transform: rotateY(180deg);
        background: #e5e7eb;
        border-color: #9ca3af;
        color: #374151;
    }

    .btn {
        padding: 1rem 3rem;
        border: none;
        background: var(--c-primary);
        color: white;
        font-size: 1.2rem;
        font-weight: bold;
        border-radius: 2rem;
        cursor: pointer;
    }

    .btn:disabled {
        opacity: 0.7;
        cursor: not-allowed;
    }

    .stats {
        color: var(--c-text-muted);
    }
</style>
